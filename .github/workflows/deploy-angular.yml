name: Deploy Angular to GitHub Pages

on:
  workflow_dispatch:  # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        uses: actions/checkout@v4

      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18  # –ò–ª–∏ –Ω—É–∂–Ω–∞—è –≤–µ—Ä—Å–∏—è

      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        run: npm install

      - name: –°–±–æ—Ä–∫–∞ Angular
        run: npx ng build --configuration=production --base-href "/v18"

      - name: Deploy üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: dist/v18
          branch: gh-pages
          token: ${{ secrets.GITHUB_TOKEN }}  # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω
          clean: true  # –û—á–∏—â–∞–µ–º —Ü–µ–ª–µ–≤—É—é –≤–µ—Ç–∫—É –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
          single-commit: true  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω –∫–æ–º–º–∏—Ç –≤–º–µ—Å—Ç–æ –∏—Å—Ç–æ—Ä–∏–∏

